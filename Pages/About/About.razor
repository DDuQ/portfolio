@page "/about"

<PageTitle>About Me | My Portfolio</PageTitle>

@* Timeline Tabs + Timeline Panel *@
<div class="max-w-5xl mx-auto px-4">
    <!-- Tabs -->
    <div class="mb-4 flex rounded-xl border border-slate-700/40 bg-slate-900/60 p-1">
        <button class="w-1/2 rounded-lg px-4 py-2 text-sm font-semibold transition
                       @(activeTab == "Work" ? "bg-slate-800 text-white" : "text-slate-300 hover:text-white")"
                @onclick='() => activeTab = "Work"'>Work</button>
        <button class="w-1/2 rounded-lg px-4 py-2 text-sm font-semibold transition
                       @(activeTab == "Education" ? "bg-slate-800 text-white" : "text-slate-300 hover:text-white")"
                @onclick='() => activeTab = "Education"'>Education</button>
    </div>

    <!-- Panel -->
    <div class="rounded-2xl border border-slate-700/40 bg-slate-900/60 p-6">
        <div class="relative">
            <!-- Vertical line -->
            <div class="absolute left-6 top-0 h-full w-px bg-slate-600/40"></div>

            <div class="space-y-10">
                @foreach (var item in Items)
                {
                    <div class="relative flex gap-4">
                        <!-- Logo node -->
                        <div class="relative z-10 shrink-0">
                            <div class="h-10 w-10 overflow-hidden rounded-full ring-2 ring-slate-700/60 bg-white">
                                @if (!string.IsNullOrWhiteSpace(item.LogoUrl))
                                {
                                    <img class="block h-full w-full object-cover object-center" src="@item.LogoUrl" alt="@item.Company logo" />
                                }
                            </div>
                        </div>

                        <!-- Card -->
                        <div class="flex-1 rounded-xl border border-slate-700/40 bg-slate-800/60 p-5">
                            <p class="text-xs font-medium text-slate-300">@item.DateRange</p>
                            <h3 class="mt-1 text-lg font-semibold text-white">@item.Company</h3>
                            @if (!string.IsNullOrWhiteSpace(item.JobRole))
                            {
                                <p class="text-sm text-slate-300">@item.JobRole</p>
                            }

                            @if (item.Bullets?.Any() == true)
                            {
                                <ul class="mt-3 list-disc space-y-1 pl-5 text-slate-200">
                                    @foreach (var b in item.Bullets)
                                    {
                                        <li>@b</li>
                                    }
                                </ul>
                            }

                            @if (item.Badges?.Any() == true)
                            {
                                <div class="mt-4 flex flex-wrap gap-2">
                                    @foreach (var tag in item.Badges)
                                    {
                                        <span class="inline-flex items-center rounded-full bg-slate-700 px-2.5 py-0.5 text-xs font-medium text-slate-200">
                                            @tag
                                        </span>
                                    }
                                </div>
                            }
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>


<!-- Call to Action -->
<div class="bg-indigo-700">
    <div class="max-w-2xl mx-auto text-center py-16 px-4 sm:py-20 sm:px-6 lg:px-8">
        <h2 class="text-3xl font-extrabold text-white sm:text-4xl">
            <span class="block">Ready to work together?</span>
        </h2>
        <p class="mt-4 text-lg leading-6 text-indigo-200">
            I'm always open to discussing new projects, creative ideas or opportunities to be part of your visions.
        </p>
        <a href="/contact" class="mt-8 w-full inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-indigo-600 bg-white hover:bg-indigo-50 sm:w-auto">
            Get in touch
        </a>
    </div>
</div>

@code {
    private string activeTab = "Work";

    private record TimelineItem(
        string DateRange,
        string Company,
        string? JobRole,
        IEnumerable<string>? Bullets,
        IEnumerable<string>? Badges = null,
        string? LogoUrl = null
    );

    private readonly List<TimelineItem> Work = new()
    {
        new TimelineItem("Aug 2022 – Jul 2025", "Team International", "Software Engineer",
            [
                "Maintained legacy VB.NET systems and enhanced debugging workflows using NewRelic.",
                "Developed a ServiceNow script to auto-update incidents via scheduled jobs, which reduced AppSupport incidents by\n~7%.",
                "Integrated logging through NewRelic API to improve traceability of desktop application errors, and also confirm\nperformance degradation and locate root causes."
            ],
            [],
            "logos/TeamInternational.jpg"
            ),
        new TimelineItem("Dec 2021 – Aug 2022", "Sistecrédito", "Software Developer",
            [
                "Designed microservices with gRPC and Protocol Buffers.",
                "Followed Domain-Driven Design for clean architecture and separation of concerns.",
                "Structured C# projects using Microsoft conventions and SOLID principles."
            ],
            [],
            "logos/sistecredito.svg"
            ),
        new TimelineItem("May 2021 – Dec 2021", "MAS Global Consulting", "Software Developer",
            [
                "Integrated BambooHR API to sync and manage employee data.",
                "Worked with Azure DevOps Boards and Git Repositories for project delivery."
            ],
            [],
            "logos/MASGlobal.png"),
        new TimelineItem("Nov 2020 – May 2021", "MAS Global Consulting", "Software Developer Intern",
            [
                "Analyzed and estimated user stories for payroll processing app.",
                "Practiced Scrum, Kanban, and SAFe to support agile workflows.",
                "Contributed to CI/CD pipelines and version control with Git."
            ],
            [],
            "logos/MASGlobal.png")
    };

    private readonly List<TimelineItem> Education = new()
    {
        new TimelineItem("Feb. 2018 – Aug. 2021", " Instituto Tecnológico Metropolitano",
            "Associate’s degree in Information Systems",
            [],
            [],
            "")
    };

    private IEnumerable<TimelineItem> Items => activeTab == "Work" ? Work : Education;
}
